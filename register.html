<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>SportTrack ‚Äî –ö–∞–±–∏–Ω–µ—Ç —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="top-bar">
      <div class="top-bar__logo" data-i18n="app_title">SportTrack</div>

      <div class="top-bar__lang">
        <select id="langSelect" class="lang-select">
          <option value="ru" data-i18n="lang_ru">–†—É—Å—Å–∫–∏–π</option>
          <option value="en" data-i18n="lang_en">English</option>
          <option value="kz" data-i18n="lang_kz">“ö–∞–∑–∞“õ—à–∞</option>
        </select>
      </div>
    </header>

    <main class="coach-layout">
      <!-- –õ–ï–í–ê–Ø –ö–ê–†–¢–û–ß–ö–ê –°–ü–û–†–¢–°–ú–ï–ù–ê -->
      <section class="panel coach-card">
        <div class="coach-card__top">
          <div class="coach-avatar">
            <span
              id="athleteAvatarLetter"
              class="coach-avatar__text"
            ></span>
          </div>

          <div class="coach-card__info">
            <h1 id="athleteName" class="coach-name"></h1>

            <p class="coach-status">
              <span data-i18n="athlete_label_status">–°—Ç–∞—Ç—É—Å:</span>
              &nbsp;
              <span data-i18n="athlete_label_status_value">—Å–ø–æ—Ä—Ç—Å–º–µ–Ω</span>
            </p>

            <button
              id="editProfileBtn"
              class="btn-link"
              data-i18n="coach_edit_profile"
            >
              –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
            </button>
          </div>
        </div>

        <div class="coach-card__extra">
          <div class="coach-info-row">
            <span class="coach-label">ID:</span>
            <span id="athleteIdValue"></span>
          </div>

          <div class="coach-info-row">
            <span
              class="coach-label"
              data-i18n="athlete_label_email"
            >
              Email:
            </span>
            <span id="athleteEmailValue"></span>
          </div>

          <div class="coach-info-row">
            <span
              class="coach-label"
              id="athleteSportLabel"
              data-i18n="athlete_label_sport"
            >
              –í–∏–¥ —Å–ø–æ—Ä—Ç–∞:
            </span>
            <span id="athleteSportValue"></span>
          </div>
        </div>
      </section>

      <!-- –ü–†–ê–í–ê–Ø –ö–û–õ–û–ù–ö–ê -->
      <section class="coach-right">
        <div class="coach-right-header">
          <h2 class="coach-welcome">
            <span data-i18n="dashboard_welcome">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</span>,
            <span id="athleteFullName"></span>
          </h2>

          <button id="openChatFromAthlete" class="btn-primary btn-chat-header">
            üí¨ –ß–∞—Ç
          </button>
        </div>

        <!-- 4 –ö–ê–†–¢–û–ß–ö–ò –°–ü–†–ê–í–ê -->
        <section class="coach-menu">
          <a href="athlete_progress.html" class="coach-menu__item">
            <div class="coach-menu__icon">üìä</div>
            <div class="coach-menu__text">
              <div
                class="coach-menu__title"
                data-i18n="athlete_dashboard_progress_title"
              >
                –ü—Ä–æ–≥—Ä–µ—Å—Å
              </div>
              <div
                class="coach-menu__sub"
                data-i18n="athlete_dashboard_progress_sub"
              >
                –í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
              </div>
            </div>
          </a>

          <a href="athlete_workouts.html" class="coach-menu__item">
            <div class="coach-menu__icon">üí™</div>
            <div class="coach-menu__text">
              <div
                class="coach-menu__title"
                data-i18n="athlete_dashboard_workouts_title"
              >
                –ú–æ–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
              </div>
              <div
                class="coach-menu__sub"
                data-i18n="athlete_dashboard_workouts_sub"
              >
                –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
              </div>
            </div>
          </a>

          <a href="athlete_notifications.html" class="coach-menu__item">
            <div class="coach-menu__icon">üîî</div>
            <div class="coach-menu__text">
              <div
                class="coach-menu__title"
                data-i18n="athlete_dashboard_notifications_title"
              >
                –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
              </div>
              <div
                class="coach-menu__sub"
                data-i18n="athlete_dashboard_notifications_sub"
              >
                –°–æ–æ–±—â–µ–Ω–∏—è, –æ—Ç—á—ë—Ç—ã, —Å—Ç–∞—Ç—É—Å—ã
              </div>
            </div>
          </a>

          <a href="athlete_coach.html" class="coach-menu__item">
            <div class="coach-menu__icon">üßë‚Äçüè´</div>
            <div class="coach-menu__text">
              <div
                class="coach-menu__title"
                data-i18n="athlete_dashboard_coach_title"
              >
                –¢—Ä–µ–Ω–µ—Ä
              </div>
              <div
                class="coach-menu__sub"
                data-i18n="athlete_dashboard_coach_sub"
              >
                –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞—à–µ–º —Ç—Ä–µ–Ω–µ—Ä–µ
              </div>
            </div>
          </a>
        </section>
      </section>

      <!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–û–î –õ–ï–í–û–ô –ö–ê–†–¢–û–ß–ö–û–ô -->
      <section class="coach-summary">
        <div class="coach-summary__item">
          <span class="coach-summary__number" id="athSummaryPlans">0</span>
          <span
            class="coach-summary__label"
            data-i18n="dashboard_stats_plans"
          >
            –ü–ª–∞–Ω–æ–≤
          </span>
        </div>

        <div class="coach-summary__item">
          <span class="coach-summary__number" id="athSummaryWorkouts">0</span>
          <span class="coach-summary__label">
            –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
          </span>
        </div>

        <div class="coach-summary__item">
          <span class="coach-summary__number" id="athSummaryTasks">0</span>
          <span
            class="coach-summary__label"
            data-i18n="dashboard_stats_active_tasks"
          >
            –ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á
          </span>
        </div>
      </section>
    </main>

    <script src="lang.js"></script>
    <script>
      const rawAthlete = localStorage.getItem("user");

      if (rawAthlete) {
        try {
          const user = JSON.parse(rawAthlete);

          const name = user.username || "";
          const fullName =
            (user.last_name
              ? `${user.username} ${user.last_name}`
              : user.full_name) ||
            user.username ||
            "";

          if (name) {
            document.getElementById("athleteName").textContent = name;
          }
          if (fullName) {
            document.getElementById("athleteFullName").textContent = fullName;
          }

          if (user.id !== undefined && user.id !== null) {
            document.getElementById("athleteIdValue").textContent = user.id;
          }
          if (user.email) {
            document.getElementById("athleteEmailValue").textContent =
              user.email;
          }
          if (user.sport) {
            document.getElementById("athleteSportValue").textContent =
              user.sport;
          }

          const first = (user.username || fullName || "").trim()[0];
          if (first) {
            document.getElementById("athleteAvatarLetter").textContent =
              first.toUpperCase();
          }
        } catch (e) {
          console.error("–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ user –∏–∑ localStorage", e);
        }
      }

      document
        .getElementById("editProfileBtn")
        .addEventListener("click", () => {
          window.location.href = "athlete_profile_edit.html";
        });

      const chatBtnAth = document.getElementById("openChatFromAthlete");
      if (chatBtnAth) {
        chatBtnAth.addEventListener("click", () => {
          window.location.href = "chat.html";
        });
      }
    </script>
  </body>
</html>
