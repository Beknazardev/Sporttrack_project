<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>SportTrack ‚Äî –ö–∞–±–∏–Ω–µ—Ç —Ç—Ä–µ–Ω–µ—Ä–∞</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="top-bar">
      <div class="top-bar__logo" data-i18n="app_title">SportTrack</div>

      <div class="top-bar__lang">
        <select id="langSelect" class="lang-select">
          <option value="ru" data-i18n="lang_ru">–†—É—Å—Å–∫–∏–π</option>
          <option value="en" data-i18n="lang_en">English</option>
          <option value="kz" data-i18n="lang_kz">“ö–∞–∑–∞“õ—à–∞</option>
        </select>
      </div>
    </header>

    <main class="coach-layout">
      <!-- –õ–ï–í–ê–Ø –ö–ê–†–¢–û–ß–ö–ê –¢–†–ï–ù–ï–†–ê -->
      <section class="panel coach-card">
        <div class="coach-card__top">
          <div class="coach-avatar">
            <span id="avatarLetter" class="coach-avatar__text"></span>
          </div>

          <div class="coach-card__info">
            <h1 id="coachName" class="coach-name"></h1>

            <p class="coach-status">
              <span data-i18n="coach_label_status">–°—Ç–∞—Ç—É—Å:</span>
              &nbsp;
              <span data-i18n="coach_label_status_value">—Ç—Ä–µ–Ω–µ—Ä</span>
            </p>

            <button
              id="editProfileBtn"
              class="btn-link"
              data-i18n="coach_edit_profile"
            >
              –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
            </button>
          </div>
        </div>

        <div class="coach-card__extra">
          <div class="coach-info-row">
            <span class="coach-label">ID:</span>
            <span id="coachIdValue"></span>
          </div>

          <div class="coach-info-row">
            <span class="coach-label" data-i18n="coach_label_email">
              Email:
            </span>
            <span id="coachEmailValue"></span>
          </div>

          <div class="coach-info-row">
            <span
              class="coach-label"
              id="coachSportLabel"
              data-i18n="coach_label_sport"
            >
              –í–∏–¥ —Å–ø–æ—Ä—Ç–∞:
            </span>
            <span id="coachSportValue"></span>
          </div>
        </div>
      </section>

      <!-- –ü–†–ê–í–ê–Ø –ö–û–õ–û–ù–ö–ê -->
      <section class="coach-right">
        <div class="coach-right-header">
          <h2 class="coach-welcome">
            <span data-i18n="dashboard_welcome">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</span>,
            <span id="coachFullName"></span>
          </h2>

          <button id="openChatFromCoach" class="btn-primary btn-chat-header">
            üí¨ –ß–∞—Ç
          </button>
        </div>

        <!-- 4 –ö–ê–†–¢–û–ß–ö–ò -->
        <section class="coach-menu">
          <a href="coach_athletes.html" class="coach-menu__item">
            <div class="coach-menu__icon">üëü</div>
            <div class="coach-menu__text">
              <div
                class="coach-menu__title"
                data-i18n="dashboard_athletes_title"
              >
                –°–ø–æ—Ä—Ç—Å–º–µ–Ω—ã
              </div>
              <div
                class="coach-menu__sub"
                data-i18n="dashboard_athletes_sub"
              >
                –°–ø–∏—Å–æ–∫ –∏ –≤—ã–±–æ—Ä —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤
              </div>
            </div>
          </a>

          <a href="coach_tasks.html" class="coach-menu__item">
            <div class="coach-menu__icon">üìù</div>
            <div class="coach-menu__text">
              <div
                class="coach-menu__title"
                data-i18n="dashboard_tasks_title"
              >
                –ó–∞–¥–∞—á–∏
              </div>
              <div
                class="coach-menu__sub"
                data-i18n="dashboard_tasks_sub"
              >
                –í—ã–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω—ã–º
              </div>
            </div>
          </a>

          <a href="coach_plans.html" class="coach-menu__item">
            <div class="coach-menu__icon">üìÖ</div>
            <div class="coach-menu__text">
              <div
                class="coach-menu__title"
                data-i18n="dashboard_plans_title"
              >
                –ü–ª–∞–Ω—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
              </div>
              <div
                class="coach-menu__sub"
                data-i18n="dashboard_plans_sub"
              >
                –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ –¥–Ω—è–º –∏ —É—Ä–æ–≤–Ω—è–º
              </div>
            </div>
          </a>

          <a href="coach_notifications.html" class="coach-menu__item">
            <div class="coach-menu__icon">üîî</div>
            <div class="coach-menu__text">
              <div
                class="coach-menu__title"
                data-i18n="dashboard_notif_title"
              >
                –û–ø–æ–≤–µ—â–µ–Ω–∏—è
              </div>
              <div
                class="coach-menu__sub"
                data-i18n="dashboard_notif_sub"
              >
                –û—Ç—á—ë—Ç—ã, –∑–∞–ø—Ä–æ—Å—ã, —Å—Ç–∞—Ç—É—Å—ã
              </div>
            </div>
          </a>
        </section>
      </section>

      <!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–û–î –õ–ï–í–û–ô –ö–ê–†–¢–û–ß–ö–û–ô -->
      <section class="coach-summary">
        <div class="coach-summary__item">
          <span class="coach-summary__number" id="summaryAthletes">0</span>
          <span
            class="coach-summary__label"
            data-i18n="dashboard_stats_athletes"
          >
            –°–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤
          </span>
        </div>

        <div class="coach-summary__item">
          <span class="coach-summary__number" id="summaryPlans">0</span>
          <span
            class="coach-summary__label"
            data-i18n="dashboard_stats_plans"
          >
            –ü–ª–∞–Ω–æ–≤
          </span>
        </div>

        <div class="coach-summary__item">
          <span class="coach-summary__number" id="summaryTasks">0</span>
          <span
            class="coach-summary__label"
            data-i18n="dashboard_stats_active_tasks"
          >
            –ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á
          </span>
        </div>
      </section>
    </main>

    <script src="lang.js"></script>
    <script>
      const rawUser = localStorage.getItem("user");

      if (rawUser) {
        try {
          const user = JSON.parse(rawUser);

          const name = user.username || "";
          const fullName =
            (user.last_name
              ? `${user.username} ${user.last_name}`
              : user.full_name) ||
            user.username ||
            "";

          if (name) {
            document.getElementById("coachName").textContent = name;
          }
          if (fullName) {
            document.getElementById("coachFullName").textContent = fullName;
          }

          if (user.id !== undefined && user.id !== null) {
            document.getElementById("coachIdValue").textContent = user.id;
          }
          if (user.email) {
            document.getElementById("coachEmailValue").textContent = user.email;
          }
          if (user.sport) {
            document.getElementById("coachSportValue").textContent = user.sport;
          }

          const first = (user.username || fullName || "").trim()[0];
          if (first) {
            document.getElementById("avatarLetter").textContent =
              first.toUpperCase();
          }
        } catch (e) {
          console.error("–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ user –∏–∑ localStorage", e);
        }
      }

      document
        .getElementById("editProfileBtn")
        .addEventListener("click", () => {
          window.location.href = "coach_profile_edit.html";
        });

      const chatBtn = document.getElementById("openChatFromCoach");
      if (chatBtn) {
        chatBtn.addEventListener("click", () => {
          window.location.href = "chat.html";
        });
      }
    </script>
  </body>
</html>
